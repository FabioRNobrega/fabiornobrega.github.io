
<header>
  <nav class="menu">
    <a class="menu__logo" href="{{site.url}}/#">
      <img class="invert-img-color" src="{{ site.baseusrl }}/assets/images/logo/logo-cut.png" alt="{{ site.title }}">
    </a>
    <ul>
      {% assign current_url = page.url %}
      {% assign pages_collection = "pages" | append: page.collection_suffix %}
      {% assign pages = site[pages_collection] %}
      {% for document_id in site.navigation %}
        {% for page in pages %}
          {% include i18n/document_id obj=page %}
          {% if obj_document_id == document_id %}
          <li  class="menu__item">
            <a href="{{ page.url | prepend: site.baseurl }}" {% if page.url == current_url %}aria-current="page"{% endif %}>
              {{ page.title | escape }}
            </a>
          </li>
          {% break %}
          {% endif %}
        {% endfor %}
      {% endfor %}
      <li class="menu__item">
        {% include lang-switcher.html %}
      </li>
      <li id="dark-mode-toggle" class="menu__item dark-mode-icon" aria-label="dark mode"> 
        <i class="fas fa-adjust"></i>
      </li>
    </ul>
  </nav>

<div class="menu-mobile__icon">
  <div class="menu__logo">
    {{ site.title }}
  </div>
  <a href="#" onclick="toggle();">
    <i class="fas fa-bars"></i>
  </a>
</div>
 
<nav class="menu-mobile">
  <ul>
    {% assign current_url = page.url %}
    {% assign pages_collection = "pages" | append: page.collection_suffix %}
    {% assign pages = site[pages_collection] %}
    {% for document_id in site.navigation %}
      {% for page in pages %}
        {% include i18n/document_id obj=page %}
        {% if obj_document_id == document_id %}
        <li>
          <a href="{{ page.url | prepend: site.baseurl }}" {% if page.url == current_url %}aria-current="page"{% endif %}>
            {{ page.title | escape }}
          </a>
        </li>
        {% break %}
        {% endif %}
      {% endfor %}
    {% endfor %}
    <li id="dark-mode-toggle-mobile" class="dark-mode-icon" aria-label="dark mode"> 
      <i class="fas fa-adjust"></i> 
    </li>
    <li>
      {% include lang-switcher.html %}
    </li>
  </ul>
</nav>
</header>


<script language="JavaScript">
  document.getElementsByClassName('menu-mobile')[0].style.display = 'none'
  let darkMode = localStorage.getItem('darkMode')
  const $html = document.querySelector('html')
  const darkModeToggle = document.querySelector('#dark-mode-toggle')
  const darkModeToggleMobile = document.querySelector('#dark-mode-toggle-mobile')

  function toggle() {    
    var state = document.getElementsByClassName('menu-mobile')[0].style.display;
    if (state == 'block') {
        document.getElementsByClassName('menu-mobile')[0].style.display = 'none';
    } else {
        document.getElementsByClassName('menu-mobile')[0].style.display = 'block';
    }
  }

  const enableDarkMode = () => {
    $html.classList.toggle('dark-mode');
    localStorage.setItem('darkMode', 'enabled');;
  }
  
  const disableDarkMode = () => {
    $html.classList.toggle('dark-mode');
    localStorage.setItem('darkMode', 'disabled');
  }

  if (darkMode === 'enabled') {
    enableDarkMode();
  }

  darkModeToggle.addEventListener("click", () => {
    darkMode = localStorage.getItem('darkMode')
    if (darkMode !== 'enabled') {
      enableDarkMode();
    } else {
      disableDarkMode();
    }
  })

  darkModeToggleMobile.addEventListener("click", () => {
    darkMode = localStorage.getItem('darkMode')
    if (darkMode !== 'enabled') {
      enableDarkMode();
    } else {
      disableDarkMode();
    }
  })

</script>

